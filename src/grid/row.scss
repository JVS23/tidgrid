/*
 * grid/row.scss
 */

@use "sass:math";
@use "util/string";
@use "mode";
@use "namespace";
@use "variant";
@use "static";

$row-sizes: (12, 16) !default;
$fractions: (
  "1/2": math.div(1, 2),
  "1/3": math.div(1, 3),
  "1/4": math.div(1, 4),
  "2/3": math.div(2, 3),
) !default;

@mixin child-cell() {
  & > .#{namespace.use-prefix(cell)} {
    @content;
  }
}

@include static.declare(row) {
  display: flex;
  flex-flow: row wrap;
  box-sizing: border-box;
}

@include variant.generate {
  @include variant.declare(auto) {
    @include child-cell {
      @include mode.auto;
    }
  }

  @include variant.declare(stacked) {
    @include child-cell {
      @include mode.stacked;
    }
  }

  @include variant.declare(thin) {
    @include child-cell {
      @include mode.thin;
    }
  }

  @include variant.declare(fill) {
    @include child-cell {
      @include mode.fill;
    }
  }

  @include mode.frac($fractions) using ($name, $cell-width) {
    @include variant.declare($name) {
      @include child-cell {
        width: $cell-width;
      }
    }
  }

  @each $row-size in $row-sizes {
    @include static.declare(size-#{$row-size}) {
      @include mode.span($row-size) using ($name, $cell-width) {
        @include variant.declare($name) {
          @include child-cell {
            width: $cell-width;
          }
        }
      }
    }
  }
}
